<ion-content no-bounce>
  <div class="login-wrapper">
    <img src="assets/images/logo-blanco.png" class="logo">    
    <div class="title">Crea tu contraseña</div>
    <!---[formGroup]="formGroup"-->
    <form  class="login" (ngSubmit)="setPassword()">     
      <div class="input-wrapper">
        <label for="email">Correo</label>
        <input 
          formControlName="email" 
          type="email" 
          name="email" 
          placeholder="Escribe tu correo aquí">
      </div>
      <div *ngIf="email.invalid && (email.dirty || email.touched)"
          class="alert alert-danger">
        <div *ngIf="email.errors.required">
          Se requiere un correo.
        </div>
        <div *ngIf="email.errors.email">
          Se requiere un correo válido.
        </div>
      </div>        
      <div class="input-wrapper">
        <label for="password">Contraseña</label>
        <input 
          formControlName="password" 
          type="password" 
          name="password" 
          placeholder="Escribe tu contraseña">  
          <show-password-toggle></show-password-toggle>     
      </div>
      <div *ngIf="formGroup.errors" class="alert alert-danger">
        <div *ngIf="formGroup.errors.passwordsDontMatch">
          Las contraseñas deben coincidir.
        </div>            
      </div>    
      <div *ngIf="password.invalid && (password.dirty || password.touched)"
          class="alert alert-danger">
        <div *ngIf="password.errors.required">
          Se requiere una contraseña.
        </div>
        <div *ngIf="password.errors.minLength">
          La contraseña requiere de 6 caracteres mínimo.
        </div>
        <div *ngIf="password.errors.pattern">
          La contraseña requiere de 1 letra mayúscula, 1 letra minúscula, 1 número y 1 caracter especial.
        </div>                  
      </div>       
      <div class="input-wrapper password">
        <label for="password">Confirma tu Contraseña</label>
        <input formControlName="password_confirmation" 
        type="password" 
        name="password" 
        placeholder="Confirma tu contraseña">
        <show-password-toggle></show-password-toggle>     

      </div>      
      <div *ngIf="password_confirmation.invalid && (password_confirmation.dirty || password_confirmation.touched)"
          class="alert alert-danger">
        <div *ngIf="password_confirmation.errors.required">
          Se requiere la confirmación de contraseña.
        </div>
        <div *ngIf="password_confirmation.errors.mustMatch">
          Las contraseñas deben coincidir.
        </div>
      </div>         
      <div class="row">
        <input 
          class="next-button" 
          type="submit" 
          value="Guardar e iniciar sesión"
          [disabled]="!(email.valid && password.valid && password_confirmation.valid && formGroup.errors === null)"
        />
      </div>
    </form> 
    <div class="row">
      <button class="next-button-small" (tap)="login()">
        Regresar
      </button>
    </div>
    <div class="terms_and_conditions">
      <p (tap)="openTerms()">Al hacer login aceptas los términos y condiciones.</p>
    </div>     
  </div>
</ion-content>